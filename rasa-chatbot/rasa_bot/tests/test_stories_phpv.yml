version: "3.1"
stories:

#____________________________happy paths____________________________

- story: phpv happy path (short user input) 1
  steps:
  - user: |-
      /start_conversation
    intent: start_conversation
  - action: utter_introduce
  - action: utter_ask_insurance_type
  - user: |
      [phpv]{"entity": "insurance_type", "value": "Private Haftpflichtversicherung"}
    intent: decide_for_insurance_type
  - action: action_validate_slot_mappings
  - action: utter_offer_help_with_insurance_type
  - user: |
      Ja
    intent: affirm
  - action: utter_begin_tariff_conversation
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [mich selbst]{"entity": "phpv_beneficiary", "value":"Single"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [Studentin]{"entity": "phpv_employment_type", "value":"Student"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Nö
    intent: deny
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      ja
    intent: affirm
  - action: phpv_form
  - active_loop: null
  - action: utter_submit_phpv_form

- story: phpv happy path (short user input) 2
  steps:
  - user: |-
      /start_conversation
    intent: start_conversation
  - action: utter_introduce
  - action: utter_ask_insurance_type
  - user: |
      [phpv]{"entity": "insurance_type", "value": "Private Haftpflichtversicherung"}
    intent: decide_for_insurance_type
  - action: action_validate_slot_mappings
  - action: utter_offer_help_with_insurance_type
  - user: |
      Abschließen
    intent: request_tariff_information
  - action: utter_begin_tariff_conversation
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [ich]{"entity": "phpv_beneficiary", "value":"Single"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [Student]{"entity": "phpv_employment_type", "value":"Student"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Nein
    intent: deny
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      ja
    intent: affirm
  - action: phpv_form
  - active_loop: null
  - action: utter_submit_phpv_form

- story: phpv happy path (short user input) 3
  steps:
  - user: |-
      /start_conversation
    intent: start_conversation
  - action: utter_introduce
  - action: utter_ask_insurance_type
  - user: |
      [phpv]{"entity": "insurance_type", "value": "Private Haftpflichtversicherung"}
    intent: decide_for_insurance_type
  - action: action_validate_slot_mappings
  - action: utter_offer_help_with_insurance_type
  - user: |
      Ich möchte einen Tarif abschließen.
    intent: request_tariff_information
  - action: utter_begin_tariff_conversation
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [mich]{"entity": "phpv_beneficiary", "value":"Single"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [Student]{"entity": "phpv_employment_type", "value":"Student"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Nein, danke.
    intent: deny
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Ja, das passt.
    intent: affirm
  - action: phpv_form
  - active_loop: null
  - action: utter_submit_phpv_form

- story: phpv happy path (long user input) 1
  steps:
  - user: |-
      /start_conversation
    intent: start_conversation
  - action: utter_introduce
  - action: utter_ask_insurance_type
  - user: |
      [phpv]{"entity": "insurance_type", "value": "Private Haftpflichtversicherung"}
    intent: decide_for_insurance_type
  - action: action_validate_slot_mappings
  - action: utter_offer_help_with_insurance_type
  - user: |
      Ich würde gerne Informationen erhalten, um den passenden Tarif abzuschließen.
    intent: request_tariff_information
  - action: utter_begin_tariff_conversation
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Für [mich selbst]{"entity": "phpv_beneficiary", "value":"Single"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Ich bin [Studentin]{"entity": "phpv_employment_type", "value":"Student"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Nein, das brauche ich nicht.
    intent: deny
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Ja, das ist in Ordnung.
    intent: affirm
  - action: phpv_form
  - active_loop: null
  - action: utter_submit_phpv_form

#____________________________happy paths (questions)____________________________

- story: phpv happy path (question profession) 1
  steps:
  - user: |-
      /start_conversation
    intent: start_conversation
  - action: utter_introduce
  - action: utter_ask_insurance_type
  - user: |
      [phpv]{"entity": "insurance_type", "value": "Private Haftpflichtversicherung"}
    intent: decide_for_insurance_type
  - action: action_validate_slot_mappings
  - action: utter_offer_help_with_insurance_type
  - user: |
      Ich möchte einen Tarif abschließen.
    intent: request_tariff_information
  - action: utter_begin_tariff_conversation
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      [ich]{"entity": "phpv_beneficiary", "value":"Single"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Warum wird nach meinem Beruf gefragt?
    intent: faq
  - action: action_llm_response
  - user: |
      [Student]{"entity": "phpv_employment_type", "value":"Student"}
    intent: inform
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Nein
    intent: deny
  - action: phpv_form
  - active_loop: phpv_form
  - user: |
      Ja, das passt.
    intent: affirm
  - action: phpv_form
  - active_loop: null
  - action: utter_submit_phpv_form
